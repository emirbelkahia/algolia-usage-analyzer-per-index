<!DOCTYPE html>
<html>
<head>
    <title>Algolia Usage Analyzer per Index</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header>
        <h1>Algolia Usage Analyzer per Index</h1>
        <p class="note">Note: This tool was independently developed by Emir Belkahia, Customer Success Manager at Algolia in Jan 2024. It is not an official Algolia product and is not maintained by Algolia. For questions or improvement suggestions, please contact me on LinkedIn: <a href="https://www.linkedin.com/in/emirbelkahia/">my LinkedIn profile</a>.</p>
    </header>

    <div class="container">
        <!-- Warning message -->
        <p class="warning">
            üôã‚Äç‚ôÄÔ∏è Dear user, be warned üôã‚Äç‚ôÄÔ∏è </br></br>
            This tool only displays data for <a href="https://www.algolia.com/doc/api-reference/api-methods/search/">single query traffic</a>. <a href="https://www.algolia.com/doc/api-reference/api-methods/multiple-queries/">Multi-query traffic</a>, which may target multiple indices simultaneously, cannot, by design, be accurately attributed to specific indices and hence is not included in the chart.
        </p>
        <form id="dataForm" class="form-container">
            <label for="applicationId">Algolia Application ID:</label>
            <input type="text" id="applicationId" name="applicationId" placeholder="e.g. 879Z8AOPDM" pattern="^[A-Z0-9]{10}$" title="Algolia Application ID looks like this NPAQ1H87OA an can be found in your Algolia dashboard" required>
            <br>
            <label for="apiKey">Algolia Usage API Key:</label>
            <input type="text" id="apiKey" name="apiKey" placeholder="e.g. 7769ffff026b0089b98348aaa256889c5" pattern="^[a-f0-9]{32}$" title="API Key must be a 32-character hexadecimal string and can be found in your Algolia dashboard > API keys scection" required>
            <br>
            <label for="numDays">Number of days (max 90):</label>
            <input type="number" id="numDays" name="numDays" placeholder="e.g. 7" min="0" max="90" required>
            <br>
            <label for="indices">Indices (comma separated):</label>
            <input type="text" id="indices" name="indices" placeholder="e.g. prod_fr,prod_uk,prod_es" pattern="^[a-zA-Z0-9_\-]+(,[a-zA-Z0-9_\-]+)*$" title="Indices must be comma separated, can include underscores and dashes" required>
            <br>
            <p class="note">Tip: if you have a long list of indices that you want to analyze, a good tip to avoid having to type them each time is to create a small txt file in which you put all their names. Each time you need this analysis, just copy and paste from this file to the field above.</p>
            <input type="submit" value="Generate Graph">
            <!-- Download Button -->
            <button onclick="downloadChart()" class="download-btn">Download Chart as PNG</button>
        </form>
        <div class="chart-container">
            <canvas id="chartCanvas"></canvas>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>
